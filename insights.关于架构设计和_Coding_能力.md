---
id: 29bj8n4jaljebfl9m9vgyfm
title: 关于架构设计和_Coding_能力
desc: ''
updated: 1749309141115
created: 1740152694275
---

## 关于代码能力

代码是工具，但是系统需要**精心设计和简洁优雅地实现**。提升设计和实现能力，需要多读、多写。也就需要累积足够多的经验，学透领域常用知识，熟练使用常用工具，熟悉常见编程范式。

学习需要**模仿和借鉴，大量实践**。模仿优秀的代码，借鉴优秀的设计。才能有深刻印象，有感性认识。甚至需要找一个项目，自己敲一遍代码，不要复制粘贴。这样才能加深印象，让自己熟悉设计的思路，编程的细节。

多做总结和思考。总结设计思路，总结实现细节，总结如何 debug。

提高设计和编程能力，需要多学习优秀的架构设计和代码实现，多实践，多思考总结。有空就可以多练习代码，对比不同实现方案，对比优劣。

## 关注架构设计

Donald Knuth 有句名言：“过早优化是万恶之源。” 但是 Matya 强调 "实时系统设计初期就该考虑性能"。性能是设计出来，而不是改出来的。

- **战略层面**，我们需要制定一个总体目标，比如 要求每秒处理百万事件或纳秒级响应，指导我们的大方向。
- **战术层面**，我们需要考虑具体的实现细节，比如 “我应该在这个 std::vector 上调用 reserve 吗？”，“这个函数内联会更快吗？”，“哪个哈希表更节省空间？”等等。

Donald Knuth 反对的是过早地在**战术**层面过度局部优化，这只会把代码搞复杂。而 Matya 强调的是在架构设计时在**战略**层面就要有性能意识。如果一开始的系统设计（数据结构、并发模型）就有问题，后面再怎么在战术上进行局部优化，效果也可能微乎其微。需要兼顾这两个维度。

先思考和架构设计，再开始写代码。

参考：
1. [Optiver低延时交易 核心解密（1） - 愚夫一得的文章 - 知乎](https://zhuanlan.zhihu.com/p/1912400838887974697)

## 关注分析、抽象和解决问题

### 分析问题

首先，精准定位问题。比如，运行时报错，分析是哪个模块的问题，定位到具体模块，函数。紧接着，对问题分类，是数据格式不对，还是参数不对。

其次，分析问题的原因。找到引起问题的导火索。比如，数据格式不对，是因为数据预处理时，数据格式不对，还是模型输入时，数据格式不对。这需要了解各个模块的结构，特别是输入输出数据格式，数据流向，才能定位原因。

### 抽象问题

认识和分析问题后，需要抽象和建模，以数字和程序的方式表达。尽可能找到高效的方案。

把 Leetcode 的问题转化为数学描述，用程序解决，也是一种锻炼方式。

设计解决方案，比如，数据格式不对，可能是数据预处理时，数据格式不对。可以尝试修改数据预处理的代码，或者修改模型输入的代码。

如果无法解决问题，要能够提供有效信息，有思考和尝试。向团队协调资源，提出意见，积极沟通寻找新的方案。

### 找到业务方向

选择有前景的业务方向，通常有更直观的影响，更丰富的回报。

精力十分重要，非必要不做没有价值的体力活

## 关注阅读代码和梳理的思路

跟着数据流动的方向看代码。各种代码会加工数据，生成新的数据，传递给下一个处理的函数或对象。顺着数据流动，便可很快建立对代码的宏观认知。

首先，需要关注数据格式，这是了解代码如何加工数据的第一步。其次，关注生成什么格式数据，哪些需要保存，哪些数据到此为止，不再使用。

把不同功能的代码，看着模块。在模块间，数据完成了哪些工作。

梳理这些内容，便大体了解一个项目。

### 另一方法

1. 粗略阅读官方文档，明确项目主要功能和运行项目的步骤；
2. 找到项目入口，运行项目；
3. 找到主要功能对应代码。选择其中一个调试，修改执行路径上的代码，打 Log，尝试为项目添加注释；
4. 多挑选几个功能，重复步骤 3。尝试画出功能的调用流程图；
5. 以点带面，构建功能的联系图，进一步理解项目架构。配合文档通常事半功倍，尝试画出整个项目架构图；
6. 若有必要，从功能入手，深入源码层面分析。比如想了解整体架构，或者想探究某个问题解决方案，我们可以对症下药地阅读，要有的放矢。大水漫灌式地通读会浪费很多时间，收益不明显。比如红黑树细节等等，大多数情况可以暂时不细究。

### 关注阅读效率和注意力

阅读论文时，特别是逐行时，要能够理解，同现有感知和认识联系起来，才能是看进去了。或者是洞察到不懂的新领域，弄明白不懂的地方。

要保持专注。

## 关注效率，做好时间分配
阅读文档或代码时，有大致了解即可。深入了解细节会消耗很多时间，需要斟酌是否值得。最好把时间放到任务下一步所需的细节，才能尽快推进度。而那些更细节和深层的技术，如果用的上，在后续阶段，会再次出现。

具体做法，比如只看用法，暂时跳过实现，停留在抽象层面，学习到用法猜即可。后续，在遇到瓶颈时，或者有空余时间时，单独梳理。

## 梳理思路笔记

尽可能少的贴代码，多用总结性的文字描述，甚至用图片，以精练地提取信息，阅读速度更快。需要代码才能说明时，使用核心部分即可。比如，哪个函数做了什么工作。

## Debug

查看数据格式，是否发生了不对。随后，重新审视定义格式的地方，是否出现错误。

## 可观测十分重要，用好 log 和工具






[[insights.工程能力]]